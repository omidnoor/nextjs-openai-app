(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[967],{2457:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/post/new",function(){return s(7595)}])},202:function(e,t,s){"use strict";s.d(t,{Z:function(){return m}});var r=s(5893),i=s(3606),n=s(9417),o=s(7814),l=s(5675),a=s.n(l),c=s(1664),d=s.n(c),h=s(9200),x=s(2630),u=s(7294),p=s(8416);function m(e){let{children:t,availableTokens:s,posts:l,postid:c,postCreated:m}=e,{user:f}=(0,i.aF)(),{setPostsFromSSR:w,posts:g,getPosts:j,noMorePosts:b}=(0,u.useContext)(p.Z);return(0,u.useEffect)(()=>{if(w(l),c){let e=l.find(e=>e._id===c);e||j({getNewerPosts:!0,lastPostDate:m})}},[l,w,c,m,j]),(0,r.jsxs)("div",{className:"grid grid-cols-[300px_1fr] h-screen max-h-screen",children:[(0,r.jsxs)("div",{className:"flex flex-col text-white overflow-hidden",children:[(0,r.jsxs)("div",{className:"bg-slate-800 px-2 ",children:[(0,r.jsx)(h.Z,{}),(0,r.jsx)(x.Z,{variant:"contained",fullWidth:!0,sx:{marginTop:"30px",backgroundColor:"green !important","&:hover":{backgroundColor:"darkgreen !important",textDecoration:"none"},font:"inherit"},children:(0,r.jsx)(d(),{style:{textDecoration:"none"},href:"/post/new",children:"New Post"})}),(0,r.jsxs)(d(),{href:"/token-topup",className:"flex justify-center mt-2 text-center ",children:[(0,r.jsx)(o.G,{icon:n.owJ,className:"text-yellow-500 w-[15px]"}),(0,r.jsxs)("span",{className:"pl-1",children:[s," token available"]})]})]}),(0,r.jsxs)("div",{className:"px-4 flex-1 overflow-auto scrollbar-hide bg-gradient-to-b from-slate-800 to-cyan-800",children:[null==g?void 0:g.map((e,t)=>{let s=e.title.slice(0,50);return(0,r.jsx)(d(),{href:"/post/".concat(e._id),className:"py-1  block text-ellipsis overflow-hidden whitespace-nowrap my-1 px-2 bg-white/10 cursor-pointer border border-white/0 rounded-sm ".concat(c===e._id?"bg-white/30 border-white":""),children:s},t)}),!b&&g.length>5&&(0,r.jsx)("div",{onClick:()=>{j({lastPostDate:g[g.length-1].created})},className:"hover:underline text-sm text-slate-400 text-center cursor-pointer mt-4",children:"Load more posts"})]}),(0,r.jsx)("div",{className:"bg-cyan-800 flex items-center gap-2 border-t border-t-black/50 h-20 px-2",children:f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"min-w-[50px]",children:(0,r.jsx)(a(),{src:f.picture,alt:f.name,height:50,width:50,priority:!0,className:"rounded-full"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"font-bold",children:f.email}),(0,r.jsx)(d(),{href:"/api/auth/logout",className:"text-sm",children:"logout"})]})]}):(0,r.jsx)(d(),{href:"/api/auth/login",children:"Login"})})]}),t]})}},9200:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var r=s(5893),i=s(9417),n=s(7814);function o(){return(0,r.jsxs)("div",{className:"text-3xl text-center py-4 font-heading",children:["UtopAI",(0,r.jsx)(n.G,{icon:i.qxT,className:"text-2xl text-slate-400"})]})}},7595:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return u},default:function(){return p}});var r=s(5893),i=s(202),n=s(7294),o=s(2175),l=s(6310),a=s(7283),c=s(2630),d=s(1163),h=s(7814),x=s(9417),u=!0;function p(){let e=(0,d.useRouter)(),[t,s]=(0,n.useState)(!1),[i,u]=(0,n.useState)({}),p=l.Ry({topic:l.Z_().required("Topic is required").min(3,"Topic must be at least 50 characters").max(300,"Topic must be less than 300 characters"),keywords:l.Z_().required("Keywords is required").min(3,"Topic must be at least 50 characters").max(100,"Topic must be less than 300 characters")}),m=async(t,r)=>{let{setSubmitting:i}=r;s(!0);try{let r=await fetch("/api/generatePost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await r.json();(null==n?void 0:n.postid)&&e.push("/post/".concat(n.postid)),console.log(n),s(!1),i(!1)}catch(e){s(!1),i(!1)}};return(0,r.jsx)("div",{className:"h-full overflow-hidden",children:(0,r.jsxs)("div",{className:"w-full h-full flex flex-col items-center    justify-center overflow-auto ",children:[!t&&(0,r.jsx)(o.J9,{initialValues:{topic:"",keywords:""},validationSchema:p,onSubmit:m,children:e=>{let{handleSubmit:t,isSubmitting:s,errors:i,touched:n}=e;return(0,r.jsx)(o.l0,{children:(0,r.jsxs)("div",{className:"w-full h-full m-auto max-w-screen-sm bg-slate-100 p-4 rounded-md shadow-xl border border-slate-200 shadow-slate-200",children:[(0,r.jsxs)("div",{className:"mb-14 ",children:[(0,r.jsx)("label",{htmlFor:"topic",children:"Generate a blog post on the topic of :"}),(0,r.jsx)(o.gN,{as:a.Z,fullWidth:!0,id:"topic",name:"topic",label:"Topic",multiline:!0,rows:2,error:n.topic&&!!i.topic,helperText:n.topic&&i.topic,sx:{marginTop:"10px",width:"100%",maxWidth:"800px",height:"56px",".MuiInputBase-input":{height:"100%"},font:"inherit"}})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{htmlFor:"keywords",className:"mb-4",children:["Targeting the following keywords :",(0,r.jsx)("small",{children:" (Separate keywords with a comma)"})]}),(0,r.jsx)(o.gN,{as:a.Z,fullWidth:!0,id:"keywords",name:"keywords",label:"Keywords",multiline:!0,rows:2,error:n.keywords&&!!i.keywords,helperText:n.keywords&&i.keywords,sx:{marginTop:"10px",width:"100%",maxWidth:"800px",height:"56px",".MuiInputBase-input":{height:"100%"},font:"inherit"}})]}),(0,r.jsx)(c.Z,{type:"submit",variant:"contained",disabled:s||n.keywords&&!!i.keywords,fullWidth:!0,sx:{marginTop:"30px",backgroundColor:"green !important","&:hover":{backgroundColor:"darkgreen !important"},font:"inherit"},children:"Generate"})]})})}}),t&&(0,r.jsxs)("div",{className:"text-green-500 flex animate-pulse w-full flex-col justify-center items-center",children:[(0,r.jsx)(h.G,{icon:x.qxT,className:"text-8xl"}),(0,r.jsx)("h6",{children:"Generating..."})]})]})})}p.getLayout=function(e,t){return(0,r.jsx)(i.Z,{...t,children:e})}}},function(e){e.O(0,[976,927,630,388,774,888,179],function(){return e(e.s=2457)}),_N_E=e.O()}]);