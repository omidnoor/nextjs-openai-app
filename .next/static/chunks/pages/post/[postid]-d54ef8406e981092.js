(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[799],{6843:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/post/[postid]",function(){return n(746)}])},202:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var s=n(5893),o=n(3606),r=n(9417),i=n(7814),l=n(5675),a=n.n(l),c=n(1664),d=n.n(c),x=n(9200),u=n(2630),h=n(7294),m=n(8416);function f(e){let{children:t,availableTokens:n,posts:l,postId:c,postCreated:f}=e,{user:p}=(0,o.aF)(),{setPostsFromSSR:j,posts:g,getPosts:v,noMorePosts:b}=(0,h.useContext)(m.Z);return(0,h.useEffect)(()=>{if(j(l),c){let e=l.find(e=>e._id===c);e||v({getNewerPosts:!0,lastPostDate:f})}},[l,j,c,f,v]),(0,s.jsxs)("div",{className:"grid grid-cols-[300px_1fr] h-screen max-h-screen",children:[(0,s.jsxs)("div",{className:"flex flex-col text-white overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-slate-800 px-2 ",children:[(0,s.jsx)(x.Z,{}),(0,s.jsx)(u.Z,{variant:"contained",fullWidth:!0,sx:{marginTop:"30px",backgroundColor:"green !important","&:hover":{backgroundColor:"darkgreen !important",textDecoration:"none"},font:"inherit"},children:(0,s.jsx)(d(),{style:{textDecoration:"none"},href:"/post/new",children:"New Post"})}),(0,s.jsxs)(d(),{href:"/token-topup",className:"flex justify-center mt-2 text-center ",children:[(0,s.jsx)(i.G,{icon:r.owJ,className:"text-yellow-500 w-[15px]"}),(0,s.jsxs)("span",{className:"pl-1",children:[n," token available"]})]})]}),(0,s.jsxs)("div",{className:"px-4 flex-1 overflow-auto scrollbar-hide bg-gradient-to-b from-slate-800 to-cyan-800",children:[null==g?void 0:g.map((e,t)=>{let n=e.title.slice(0,50);return(0,s.jsx)(d(),{href:"/post/".concat(e._id),className:"py-1  block text-ellipsis overflow-hidden whitespace-nowrap my-1 px-2 bg-white/10 cursor-pointer border border-white/0 rounded-sm ".concat(c===e._id?"bg-white/30 border-white":""),children:n},t)}),!b&&g.length>5&&(0,s.jsx)("div",{onClick:()=>{v({lastPostDate:g[g.length-1].created})},className:"hover:underline text-sm text-slate-400 text-center cursor-pointer mt-4",children:"Load more posts"})]}),(0,s.jsx)("div",{className:"bg-cyan-800 flex items-center gap-2 border-t border-t-black/50 h-20 px-2",children:p?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"min-w-[50px]",children:(0,s.jsx)(a(),{src:p.picture,alt:p.name,height:50,width:50,priority:!0,className:"rounded-full"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-bold",children:p.email}),(0,s.jsx)(d(),{href:"/api/auth/logout",className:"text-sm",children:"logout"})]})]}):(0,s.jsx)(d(),{href:"/api/auth/login",children:"Login"})})]}),t]})}},9200:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var s=n(5893),o=n(9417),r=n(7814);function i(){return(0,s.jsxs)("div",{className:"text-3xl text-center py-4 font-heading",children:["UtopAI",(0,s.jsx)(r.G,{icon:o.qxT,className:"text-2xl text-slate-400"})]})}},746:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return x},default:function(){return u}});var s=n(5893),o=n(202),r=n(7814),i=n(9417),l=n(2630),a=n(7294),c=n(1163),d=n(8416),x=!0;function u(e){let{postContent:t,title:n,metaDescription:o,keywords:x,postId:u}=e,[h,m]=(0,a.useState)(!1),[f,p]=(0,a.useState)(!1),[j,g]=(0,a.useState)(""),[v,b]=(0,a.useState)(""),N=(0,c.useRouter)(),{removePost:w}=(0,a.useContext)(d.Z);console.log(u);let y=async()=>{p(!0);try{let e=await fetch("/api/deletePost/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:u})}),t=await e.json();t.success&&(b("Post deleted successfully!"),w(u),N.replace("/post/new")),g("")}catch(e){g("Something went wrong!")}finally{p(!1)}};return(0,s.jsx)("div",{className:"overflow-auto h-full ",children:(0,s.jsxs)("div",{className:"max-w-screen-sm mx-auto px-4",children:[(0,s.jsx)("div",{className:"text-sm font-bold mt-6 p-2 bg-stone-200 rounded-sm",children:"SEO title and meta description"}),(0,s.jsxs)("div",{className:"p-4 my-2 border border-stone-200 rounded-md",children:[(0,s.jsx)("div",{className:"text-blue-600 text-2xl font-bold",children:n}),(0,s.jsx)("div",{className:"mt-2 ",children:o})]}),(0,s.jsx)("div",{className:"text-sm font-bold mt-6 p-2 bg-stone-200 rounded-sm",children:"Keywords"}),(0,s.jsx)("div",{className:"flex flex-wrap pt-2 gap-1 ",children:x.split(",").map((e,t)=>(0,s.jsxs)("div",{className:"p-2 rounded-full bg-slate-800 text-white ",children:[(0,s.jsx)(r.G,{icon:i.olY})," ",e]},t))}),(0,s.jsx)("div",{className:"text-sm font-bold mt-6 p-2 bg-stone-200 rounded-sm",children:"Blog Post"}),(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:t||""}}),(0,s.jsxs)("div",{className:"my-4",children:[!h&&(0,s.jsx)(l.Z,{variant:"contained",fullWidth:!0,sx:{marginTop:"30px",backgroundColor:"#bf404e !important","&:hover":{backgroundColor:"#a65966 !important",textDecoration:"none"},font:"inherit"},onClick:()=>m(!0),children:"Delete Post"}),!!h&&(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center ",children:[(0,s.jsx)("p",{className:"p-2 bg-red-300 text-center",children:"Are you sure you want to delete this post? This action is irreversible"}),(0,s.jsxs)("div",{className:"flex items-center h-full w-full gap-4",children:[(0,s.jsx)(l.Z,{variant:"outlined",fullWidth:!0,sx:{"&:hover":{backgroundColor:"#2d2dd2 !important",color:"white",textDecoration:"none"},font:"inherit"},onClick:()=>m(!1),children:"Cancel"}),(0,s.jsx)(l.Z,{variant:"contained",fullWidth:!0,sx:{backgroundColor:"#bf404e !important","&:hover":{backgroundColor:"#a65966 !important",textDecoration:"none"},font:"inherit"},onClick:()=>y(),children:"Confirm"})]})]})]})]})})}u.getLayout=function(e,t){return(0,s.jsx)(o.Z,{...t,children:e})}},1163:function(e,t,n){e.exports=n(6885)}},function(e){e.O(0,[976,927,630,774,888,179],function(){return e(e.s=6843)}),_N_E=e.O()}]);